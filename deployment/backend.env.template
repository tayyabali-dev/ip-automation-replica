# Backend Environment Configuration Template
# Copy this file to backend/.env and update the values for your environment

# =============================================================================
# BACKEND SERVER CONFIGURATION
# =============================================================================

# FastAPI Environment
ENVIRONMENT=development
DEBUG=true
APP_NAME="JWHD IP Automation Backend"
APP_VERSION="1.0.0"

# Server Configuration
BACKEND_HOST=0.0.0.0
BACKEND_PORT=8000
BACKEND_WORKERS=1

# CORS Configuration
BACKEND_CORS_ORIGINS=["http://localhost:3000", "http://127.0.0.1:3000"]

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# MongoDB Configuration
MONGODB_URL=mongodb://localhost:27017
MONGODB_DATABASE=jwhd_ip_automation
MONGODB_MIN_CONNECTIONS=10
MONGODB_MAX_CONNECTIONS=100

# Database Connection Pool
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=30
DB_POOL_TIMEOUT=30

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================

# Redis Server Configuration
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=
REDIS_SSL=false

# Redis Connection Pool
REDIS_MAX_CONNECTIONS=20
REDIS_RETRY_ON_TIMEOUT=true
REDIS_SOCKET_TIMEOUT=5

# =============================================================================
# CELERY CONFIGURATION
# =============================================================================

# Celery Broker Configuration
CELERY_BROKER_URL=redis://localhost:6379/0
CELERY_RESULT_BACKEND=redis://localhost:6379/0

# Celery Task Configuration
CELERY_TASK_SERIALIZER=json
CELERY_RESULT_SERIALIZER=json
CELERY_ACCEPT_CONTENT=["json"]
CELERY_TIMEZONE=UTC
CELERY_ENABLE_UTC=true

# Task Routing
CELERY_TASK_ROUTES={}
CELERY_TASK_DEFAULT_QUEUE=default
CELERY_TASK_DEFAULT_EXCHANGE=default
CELERY_TASK_DEFAULT_ROUTING_KEY=default

# =============================================================================
# AUTHENTICATION & SECURITY
# =============================================================================

# JWT Configuration
SECRET_KEY=your-super-secret-key-change-this-in-production
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=7

# Password Hashing
PASSWORD_HASH_ALGORITHM=bcrypt
PASSWORD_HASH_ROUNDS=12

# API Security
API_KEY_HEADER=X-API-Key
API_RATE_LIMIT=100/minute

# =============================================================================
# FILE STORAGE CONFIGURATION
# =============================================================================

# Local File Storage
UPLOAD_DIR=./uploads
TEMP_DIR=./temp
MAX_FILE_SIZE=10485760
ALLOWED_FILE_EXTENSIONS=[".pdf", ".docx", ".doc"]

# Google Cloud Storage (if using GCS)
GCS_BUCKET_NAME=
GCS_CREDENTIALS_PATH=
GCS_PROJECT_ID=

# File Processing
ENABLE_FILE_VIRUS_SCAN=false
FILE_RETENTION_DAYS=30

# =============================================================================
# AI/ML SERVICES CONFIGURATION
# =============================================================================

# Google Gemini API
GEMINI_API_KEY=your-gemini-api-key-here
GEMINI_MODEL=gemini-2.5-pro
GEMINI_MAX_TOKENS=2048
GEMINI_TEMPERATURE=0.1

# OpenAI API (if using as fallback)
OPENAI_API_KEY=
OPENAI_MODEL=gpt-3.5-turbo
OPENAI_MAX_TOKENS=2048

# Document Processing
ENABLE_OCR=true
OCR_LANGUAGE=eng
PDF_DPI=300

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================

# Log Levels
LOG_LEVEL=INFO
LOG_FORMAT=json
LOG_FILE=./logs/backend.log
LOG_MAX_SIZE=10MB
LOG_BACKUP_COUNT=5

# Structured Logging
ENABLE_STRUCTURED_LOGGING=true
LOG_REQUEST_ID=true
LOG_USER_ID=true

# =============================================================================
# MONITORING & HEALTH CHECKS
# =============================================================================

# Health Check Configuration
HEALTH_CHECK_INTERVAL=30
HEALTH_CHECK_TIMEOUT=10
ENABLE_HEALTH_ENDPOINT=true

# Metrics
ENABLE_METRICS=true
METRICS_PORT=9090
METRICS_PATH=/metrics

# Performance Monitoring
ENABLE_PROFILING=false
PROFILING_SAMPLE_RATE=0.1

# =============================================================================
# EMAIL CONFIGURATION
# =============================================================================

# SMTP Configuration
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-password
SMTP_TLS=true
SMTP_SSL=false

# Email Templates
EMAIL_FROM=noreply@jwhd-ip-automation.com
EMAIL_FROM_NAME="JWHD IP Automation"

# =============================================================================
# INTER-SERVER COMMUNICATION
# =============================================================================

# Frontend Server Details (for 4-server setup)
FRONTEND_SERVER_HOST=localhost
FRONTEND_SERVER_PORT=3000

# Celery Worker Server Details
CELERY_WORKER_HOST=localhost

# Redis Server Details
REDIS_SERVER_HOST=localhost
REDIS_SERVER_PORT=6379

# =============================================================================
# TASK PROCESSING CONFIGURATION
# =============================================================================

# Document Processing Tasks
DOCUMENT_PROCESSING_TIMEOUT=300
MAX_CONCURRENT_EXTRACTIONS=5
EXTRACTION_RETRY_ATTEMPTS=3

# Office Action Processing
OFFICE_ACTION_PROCESSING_TIMEOUT=600
MAX_CONCURRENT_OFFICE_ACTIONS=3

# Report Generation
REPORT_GENERATION_TIMEOUT=180
MAX_CONCURRENT_REPORTS=2

# =============================================================================
# CACHING CONFIGURATION
# =============================================================================

# Application Cache
CACHE_TTL=3600
CACHE_MAX_SIZE=1000
ENABLE_QUERY_CACHE=true

# API Response Cache
API_CACHE_TTL=300
ENABLE_API_CACHE=true

# =============================================================================
# DEVELOPMENT CONFIGURATION
# =============================================================================

# Development Tools
ENABLE_DEBUG_TOOLBAR=true
ENABLE_SWAGGER_UI=true
ENABLE_REDOC=true

# Auto-reload
ENABLE_AUTO_RELOAD=true
WATCH_FILES=true

# =============================================================================
# PRODUCTION CONFIGURATION
# =============================================================================

# Security Headers
ENABLE_SECURITY_HEADERS=true
ENABLE_CORS_CREDENTIALS=false

# Performance
ENABLE_GZIP=true
ENABLE_RESPONSE_COMPRESSION=true

# SSL/TLS
ENABLE_SSL=false
SSL_CERT_PATH=
SSL_KEY_PATH=

# =============================================================================
# MULTI-SERVER DEPLOYMENT NOTES
# =============================================================================

# For 4-server deployment, update the following:
# 1. REDIS_HOST should point to the Redis server IP
# 2. CELERY_BROKER_URL should use the Redis server IP
# 3. CELERY_RESULT_BACKEND should use the Redis server IP
# 4. FRONTEND_SERVER_HOST should be the actual frontend server IP
# 5. Update BACKEND_CORS_ORIGINS to include frontend server URL
# 6. Ensure MongoDB is accessible from this server

# Example for production 4-server setup:
# REDIS_HOST=192.168.1.102
# CELERY_BROKER_URL=redis://192.168.1.102:6379/0
# CELERY_RESULT_BACKEND=redis://192.168.1.102:6379/0
# FRONTEND_SERVER_HOST=192.168.1.99
# BACKEND_CORS_ORIGINS=["http://192.168.1.99:3000"]

# =============================================================================
# SECURITY NOTES
# =============================================================================

# IMPORTANT:
# - Change SECRET_KEY to a strong, unique value in production
# - Use strong passwords for database connections
# - Secure API keys and never commit them to version control
# - Use environment-specific values for each deployment
# - Enable SSL/TLS in production environments
# - Implement proper firewall rules between servers
# - Regularly rotate secrets and API keys